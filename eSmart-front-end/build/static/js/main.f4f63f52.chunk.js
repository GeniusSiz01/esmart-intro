(this.webpackJsonpesmart=this.webpackJsonpesmart||[]).push([[0],{309:function(e,t,n){},310:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n(9),c=n(18),i=n(19),s=n(0),o=n.n(s),l=n(77),d=n(210),u=n(244),j=n(28),b=n(364),h=n(365),p=n.p+"static/media/esmartbin.695ee95d.png",f=n(347),m=n(1),O=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return console.log("home route running"),Object(m.jsx)("div",{className:"center",children:Object(m.jsx)("div",{children:Object(m.jsxs)(f.a,{spacing:10,children:[Object(m.jsx)("div",{children:Object(m.jsx)("h2",{children:"One's man trash is another man's opportunity"})}),Object(m.jsx)("div",{children:Object(m.jsx)("img",{src:p,width:"200",alt:""})}),Object(m.jsx)("div",{children:Object(m.jsxs)(b.a,{container:!0,spacing:2,columns:16,children:[Object(m.jsx)(b.a,{item:!0,xs:8,children:Object(m.jsx)("a",{style:{textDecoration:"none"},href:"/#/donor/app",children:Object(m.jsx)(h.a,{className:"btn1",variant:"contained",children:"Waste donor"})})}),Object(m.jsx)(b.a,{item:!0,xs:8,children:Object(m.jsx)("a",{style:{textDecoration:"none"},href:"/#/collector/app",children:Object(m.jsx)(h.a,{className:"btn1",variant:"contained",children:"Waste collector"})})})]})})]})})})}}]),n}(o.a.Component),x=n(371),v=n(372),g=n(25),w=n(373),y=n(375),k=n(376),C=n(154),S=n.n(C),N=n(240),I=n.n(N),A=n(374),P=n(155),T=n.n(P),M=n(377),F=n(362),L=n(379),D=n(378),R=n(370),z=n(317),E=n(380),_=n(29),U=n.n(_),q=n(357),V=n(383),W=n(381),B=n(382),H=n(353),J=n(2),Y=n.n(J),G=n(4),Z={isAuthenticated:!1,client_id:0,token:"",check:function(){var e=this;return Object(G.a)(Y.a.mark((function t(){var n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n={token:""}).token=window.localStorage.getItem("sudo"),!n.token){t.next=7;break}return t.next=5,U.a.post("/verify/donor/token",n).then((function(t){t.data.auth?(e.isAuthenticated=!0,e.client_id=t.data.userId):console.log("user not signed in")}));case 5:t.next=7;break;case 7:case"end":return t.stop()}}),t)})))()},getToken:function(){},getAuth:function(){return this.isAuthenticated},getClientId:function(){return this.client_id},signOutUser:function(){window.localStorage.removeItem("sudo")}},K=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).handleClickOpen=function(){r.setState({open:!0})},r.handleClose=function(){r.setState({open:!1})},r.renderBins=function(){var e=r.state.bins;return 0!==e.length?Object(m.jsx)(M.a,{className:"center",sx:{width:"95%",bgcolor:"rgba(82, 183, 136, 0.74)",borderRadius:"12px",margin:"12px"},children:e.map((function(e){return Object(m.jsxs)("div",{onClick:r.handleClickOpen,children:[Object(m.jsxs)(F.a,{alignItems:"flex-start",children:[Object(m.jsx)(D.a,{children:Object(m.jsx)(R.a,{alt:e.name,src:p})}),Object(m.jsx)(L.a,{primary:"".concat(e.name," waste"),secondary:Object(m.jsxs)(o.a.Fragment,{children:[Object(m.jsx)(z.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:"Waiting for collector"})," \u2014 The waste collector will come for pick-up..."]})})]}),Object(m.jsx)(w.a,{sx:{width:"100%"},children:Object(m.jsx)(E.a,{color:"info"})})]})}))}):Object(m.jsx)("h4",{className:"center",children:"No bins available"})},r.renderModal=function(){return Object(m.jsx)("div",{children:Object(m.jsxs)(q.a,{fullScreen:r.state.fullScreen,open:r.state.open,onClose:r.handleClose,"aria-labelledby":"responsive-dialog-title",children:[Object(m.jsx)(H.a,{id:"responsive-dialog-title",children:"Schedule pick-up?"}),Object(m.jsx)(W.a,{children:Object(m.jsxs)(B.a,{children:["Below you can schedule a date for your pick-up",Object(m.jsx)("hr",{})]})}),Object(m.jsxs)(V.a,{children:[Object(m.jsx)(h.a,{autoFocus:!0,onClick:r.handleClose,children:"Cancel pick-up"}),Object(m.jsx)(h.a,{onClick:r.handleClose,autoFocus:!0,children:"Agree"})]})]})})},r.state={bins:[],userId:Z.getClientId(),binToCollect:[],open:!1,binName:"",date:new Date,time:"",value:"",binSelected:{}},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this,t={userId:this.state.userId};U.a.post("/donor/get/requests",t).then((function(t){var n=t.data;e.setState({bins:n.bins})}))}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"center",children:"Bins scheduled for pick-up"}),this.renderBins(),this.renderModal()]})}}]),n}(o.a.Component),Q=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).handleClickOpen=function(){r.setState({open:!0})},r.handleClose=function(){r.setState({open:!1})},r.openModal=function(e){var t=r.state.bins;r.setState({open:!0});var n=Number(e.currentTarget.id);t.forEach((function(e){e.id===n&&r.setState({binName:e.name,binToCollect:e})}))},r.handleRequest=Object(G.a)(Y.a.mark((function e(){var t,n,a,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state,n=t.binToCollect,a=t.userId,r.setState({open:!1}),c={userId:a,binId:n.id},0===n.length){e.next=6;break}return e.next=6,U.a.post("/donor/send/request",c).then((function(e){e.data.isSent}));case 6:case"end":return e.stop()}}),e)}))),r.renderModal=function(){return Object(m.jsx)("div",{children:Object(m.jsxs)(q.a,{fullScreen:r.state.fullScreen,open:r.state.open,onClose:r.handleClose,"aria-labelledby":"responsive-dialog-title",children:[Object(m.jsx)(H.a,{id:"responsive-dialog-title",children:"Send request for pick-up?"}),Object(m.jsx)(W.a,{children:Object(m.jsx)(B.a,{children:"Send the request for collectors near you to come and pick-up your waste bin"})}),Object(m.jsxs)(V.a,{children:[Object(m.jsx)(h.a,{onClick:r.handleClose,children:"Cancel request"}),Object(m.jsx)(h.a,{onClick:r.handleRequest,children:"Agree"})]})]})})},r.state={open:!1,bins:[],binName:"",firstName:"",lastName:"",userId:Z.getClientId(),binToCollect:[],isLoading:!1},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=Object(G.a)(Y.a.mark((function e(){var t,n=this;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={uid:this.state.userId},e.next=3,U.a.post("/donor/home",t).then((function(e){var t=e.data;n.setState({bins:t.bins,firstName:t.account.firstname,lastName:t.account.lastname})}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.bins,a=t.firstName;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("h3",{className:"center",children:["Welcome to eSmart ",a]}),Object(m.jsx)(w.a,{className:"center",sx:{width:"100%",paddingTop:"30%"},children:Object(m.jsx)(b.a,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:3},children:n.map((function(t){return Object(m.jsx)(b.a,{item:!0,xs:6,children:Object(m.jsxs)("div",{className:"block center",id:t.id,onClick:e.openModal,children:[Object(m.jsx)("p",{children:Object(m.jsx)("strong",{children:t.name})}),Object(m.jsx)("img",{src:p,width:"95",alt:""})]})},t.id)}))})}),this.renderModal()]})}}]),n}(o.a.Component),X=n(358),$=n(384),ee=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={did:Z.getClientId(),viewNotification:!1,notifications:[]},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=Object(G.a)(Y.a.mark((function e(){var t,n=this;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={donorId:this.state.did},e.next=3,U.a.post("/donor/notifications",t).then((function(e){e.data.isAvailable&&n.setState({notifications:e.data.notifications[0],viewNotification:e.data.isAvailable})}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.viewNotification,n=e.notifications;return Object(m.jsxs)("div",{className:"center",children:[Object(m.jsx)("h3",{children:"Notifications"}),Object(m.jsx)(f.a,{sx:{width:"100%",borderRadius:"12px"},spacing:2,children:t?Object(m.jsxs)(X.a,{onClick:this.handleClickOpen,sx:{borderRadius:"12px"},severity:"info",children:[Object(m.jsxs)($.a,{children:["".concat(n.first_name," ").concat(n.last_name)," "]}),"Is on they way \u2014 ",Object(m.jsx)("strong",{children:"open"})]}):Object(m.jsx)("h5",{className:"center",children:"You have no latest notifications"})})]})}}]),n}(o.a.Component),te=n(153),ne=n.n(te),ae=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).renderHistory=function(){var e=r.state.bins;return 0!==e.length?Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"center",children:"History"}),Object(m.jsx)(M.a,{className:"center",sx:{width:"100%",bgcolor:"rgba(82, 183, 136, 0.74)",borderRadius:"12px"},children:e.map((function(e){return Object(m.jsx)("div",{children:Object(m.jsxs)(F.a,{alignItems:"flex-start",children:[Object(m.jsx)(D.a,{children:Object(m.jsx)(R.a,{alt:e.first_name,src:"/static/images/avatar/1.jpg"})}),Object(m.jsx)(L.a,{primary:"".concat(e.first_name+" "+e.last_name),secondary:Object(m.jsxs)(o.a.Fragment,{children:[Object(m.jsx)(z.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:"Collected"})," \u2014 ".concat(e.name," waste")]})}),Object(m.jsx)(L.a,{secondary:ne()(e.date_time).fromNow()})]})})}))})]}):Object(m.jsx)("div",{children:Object(m.jsx)("h3",{className:"center",children:"No pick up history"})})},r.state={bins:[],userId:0,open:!1,binName:"",donorName:"",binTypes:[],donorId:0},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=Object(G.a)(Y.a.mark((function e(){var t,n=this;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={donorId:this.state.userId},e.next=3,U.a.get("/donor/history/".concat(t.donorId),t).then((function(e){var t=e.data;console.log(t),n.setState({bins:t.history})}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(m.jsx)("div",{children:this.renderHistory()})}}]),n}(o.a.Component);function re(){var e=s.useState("home"),t=Object(g.a)(e,2),n=t[0],a=t[1],r=s.useRef(null);s.useEffect((function(){r.current.ownerDocument.body.scrollTop=0}),[n]);return Object(m.jsxs)(w.a,{sx:{pb:7},ref:r,children:[Object(m.jsx)(x.a,{}),function(){var e="";switch(n){case"home":e=Object(m.jsx)(Q,{});break;case"bins":e=Object(m.jsx)(K,{});break;case"history":e=Object(m.jsx)(ae,{});break;case"notifications":e=Object(m.jsx)(ee,{})}return e}(),Object(m.jsx)(A.a,{sx:{position:"fixed",bottom:0,left:0,right:0},elevation:3,children:Object(m.jsxs)(y.a,{style:{backgroundColor:"rgba(196, 196, 196, 0.74)"},showLabels:!0,value:n,onChange:function(e,t){a(t)},children:[Object(m.jsx)(k.a,{value:"home",label:"Home",icon:Object(m.jsx)(S.a,{})}),Object(m.jsx)(k.a,{value:"bins",label:"Bins",icon:Object(m.jsx)(I.a,{})}),Object(m.jsx)(k.a,{value:"notifications",label:"Notifications",icon:Object(m.jsx)(T.a,{})})]})})]})}var ce=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(m.jsxs)(o.a.Fragment,{children:[Object(m.jsx)(x.a,{}),Object(m.jsx)(re,{}),Object(m.jsx)(v.a,{fixed:!0})]})}}]),n}(o.a.Component),ie=n(13),se={isAuthenticated:!1,client_id:0,token:"",check:function(){var e=this;return Object(G.a)(Y.a.mark((function t(){var n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n={token:""}).token=window.localStorage.getItem("cid"),!n.token){t.next=7;break}return t.next=5,U.a.post("/verify/collector/token",n).then((function(t){t.data.auth&&(e.isAuthenticated=!0,e.client_id=t.data.userId)}));case 5:t.next=7;break;case 7:case"end":return t.stop()}}),t)})))()},getToken:function(){},getAuth:function(){return this.isAuthenticated},getClientId:function(){return this.client_id},signOutUser:function(){window.localStorage.removeItem("cid")}},oe=n(360),le=s.forwardRef((function(e,t){return Object(m.jsx)(X.a,Object(l.a)({elevation:6,ref:t,variant:"filled"},e))}));function de(e){var t=s.useState(!1),n=Object(g.a)(t,2),a=n[0],r=n[1],c=function(){r(e.open)},i=function(e,t){"clickaway"!==t&&r(!1)};return Object(m.jsx)("div",{onClick:c,children:Object(m.jsxs)(f.a,{spacing:2,sx:{width:"100%"},children:[Object(m.jsx)(h.a,{onClick:c,autoFocus:!0,children:"Accept"}),Object(m.jsx)(oe.a,{open:a,autoHideDuration:5e3,onClose:i,children:Object(m.jsx)(le,{onClose:i,severity:"success",sx:{width:"100%"},children:"Request accepted check your nitfications."})})]})})}var ue=Object(ie.a)("div")((function(e){return{backgroundColor:e.theme.palette.background.paper}})),je=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).refresh=Object(G.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={id:r.state.userId},r.timer2=setTimeout(Object(G.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.post("/bins/full",t).then(function(){var e=Object(G.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.data).isEmpty){e.next=9;break}return e.t0=setInterval,e.next=5,r.refresh();case 5:e.t1=e.sent,r.timer1=(0,e.t0)(e.t1,1e3),e.next=12;break;case 9:clearTimeout(r.timer2),clearTimeout(r.timer1),r.setState({bins:n.readyBins,userId:t.data.collector.id,viewRequests:!0});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),1e3);case 2:case"end":return e.stop()}}),e)}))),r.handleClickOpen=function(e){var t=r.state.bins;r.setState({open:!0});var n=Number(e.currentTarget.id);t.forEach((function(e){if(e.id===n){var t={donorId:n};U.a.post("/accept/request",t).then((function(e){r.setState({binTypes:e.data.bins,donorId:e.data.bins[0].waste_donor_id})})),r.setState({donorName:"".concat(e.firstname+" "+e.lastname)})}}))},r.handleClose=function(){r.setState({open:!1})},r.handleAccept=function(){var e=r.state,t=e.binTypes,n=e.userId,a=e.donorId;r.setState({open:!1});var c={donorId:a,collectorId:n,binTypeId:t};U.a.post("/collect",c)},r.renderModal=function(){var e=r.state,t=e.binTypes,n=e.donorName;return Object(m.jsx)("div",{children:Object(m.jsxs)(q.a,{fullScreen:r.state.fullScreen,open:r.state.open,onClose:r.handleAccept,"aria-labelledby":"responsive-dialog-title",children:[Object(m.jsx)(H.a,{id:"responsive-dialog-title",children:"Accept request?"}),Object(m.jsx)(W.a,{children:Object(m.jsxs)(B.a,{children:[Object(m.jsx)("strong",{children:n})," Has the following bins",Object(m.jsx)(b.a,{item:!0,xs:12,md:6,children:Object(m.jsx)(ue,{children:Object(m.jsx)(M.a,{dense:!0,children:t.map((function(e){return Object(m.jsxs)(F.a,{children:[Object(m.jsx)(D.a,{children:Object(m.jsx)(R.a,{src:p})}),Object(m.jsx)(L.a,{primary:"".concat(e.name," waste"),secondary:"Secondary text"})]})}))})})})]})}),Object(m.jsxs)(V.a,{children:[Object(m.jsx)(h.a,{onClick:r.handleAccept,children:"close"}),Object(m.jsx)(de,{open:!0})]})]})})},r.state={bins:[],userId:se.getClientId(),open:!1,binName:"",donorName:"",binTypes:[],donorId:0,viewRequests:!1},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=Object(G.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refresh();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(G.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(this.timer2),clearTimeout(this.timer1);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.viewRequests,a=t.bins;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"center",children:"Bins available for pick-up"}),n?Object(m.jsx)(m.Fragment,{children:a.map((function(t){return Object(m.jsx)(M.a,{className:"center",sx:{width:"95%",bgcolor:"rgba(82, 183, 136, 0.74)",borderRadius:"12px",margin:"12px"},children:Object(m.jsxs)("div",{id:t.id,onClick:e.handleClickOpen,children:[Object(m.jsxs)(F.a,{alignItems:"flex-start",children:[Object(m.jsx)(D.a,{children:Object(m.jsx)(R.a,{alt:t.firstname})}),Object(m.jsx)(L.a,{primary:"".concat(t.firstname+" "+t.lastname),secondary:Object(m.jsxs)(o.a.Fragment,{children:[Object(m.jsx)(z.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:"Ready for collection"})," \u2014 This bin is full and is ready for pick-up. Select to accept request"]})})]}),Object(m.jsx)(w.a,{sx:{width:"100%"},children:Object(m.jsx)(E.a,{color:"info"})})]})},t.id)}))}):Object(m.jsx)("h5",{className:"center",children:"No bins available for collection"}),this.renderModal()]})}}]),n}(o.a.Component),be=n(134),he=n.n(be),pe=n(241),fe=n.n(pe);n(304),n(305);he.a.accessToken="pk.eyJ1Ijoic2J1ZGljdGlvbiIsImEiOiJja281bnI5ZmYxdXNuMnJwZ3l2MWJ2eW84In0.P4hFPkV_mY0TKw3AQ0lzfA";var me=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).getLocation=function(){},r.state={lng:-26.2054,lat:28.0396,zoom:15,start:[28.1007,-26.00242]},r.mapContainer=o.a.createRef(),r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state,n=(t.lng,t.lat,t.zoom),a=(t.start,new he.a.Map({container:this.mapContainer.current,style:"mapbox://styles/mapbox/streets-v11",center:[28.1007,-26.00242],zoom:n})),r=new fe.a({accessToken:he.a.accessToken,unit:"metric",profile:"mapbox/driving"});a.addControl(r,"top-left"),a.addControl(new he.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),a.on("move",(function(){e.setState({lng:a.getCenter().lng.toFixed(4),lat:a.getCenter().lat.toFixed(4),zoom:a.getZoom().toFixed(2)})}))}},{key:"render",value:function(){var e=this.state;e.lng,e.lat,e.zoom;return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{ref:this.mapContainer,className:"map-container"}),Object(m.jsx)("div",{className:"sidebar",children:"Address: Elias Rd, Vorna Valley, Midrand, 1686  | Donor:  | Zoom:"})]})}}]),n}(o.a.PureComponent),Oe=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={notifications:[],cid:se.getClientId(),viewNotifications:!1},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=Object(G.a)(Y.a.mark((function e(){var t,n=this;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={collectorId:this.state.cid},e.next=3,U.a.post("/collector/notifications",t).then((function(e){e.data.isAvailable&&n.setState({notifications:e.data.notifications.lenght?2:e.data.notifications[0],viewNotifications:e.data.isAvailable})}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.viewNotifications;e.notifications;return Object(m.jsx)("div",{className:"center",children:Object(m.jsx)(f.a,{sx:{width:"100%",borderRadius:"12px"},spacing:2,children:t?Object(m.jsx)(me,{}):Object(m.jsx)("h5",{className:"center",children:"You have no latest notifications"})})})}}]),n}(s.Component),xe=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={bins:[],userId:0,open:!1,binName:"",donorName:"",binTypes:[],donorId:0},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=Object(G.a)(Y.a.mark((function e(){var t,n=this;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={collectorId:8},e.next=3,U.a.get("/collector/history/".concat(t.collectorId)).then((function(e){var t=e.data;n.setState({bins:t.history})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.bins;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"center",children:"History"}),Object(m.jsx)(M.a,{className:"center",sx:{width:"100%",bgcolor:"rgba(82, 183, 136, 0.74)",borderRadius:"12px"},children:e.map((function(e){return Object(m.jsx)("div",{children:Object(m.jsxs)(F.a,{alignItems:"flex-start",children:[Object(m.jsx)(D.a,{children:Object(m.jsx)(R.a,{alt:e.firstname,src:"/static/images/avatar/1.jpg"})}),Object(m.jsx)(L.a,{primary:"".concat(e.firstname+" "+e.lastname),secondary:Object(m.jsxs)(o.a.Fragment,{children:[Object(m.jsx)(z.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:"Collected"})," \u2014 ".concat(e.name," waste")]})}),Object(m.jsx)(L.a,{secondary:ne()(e.date_time).fromNow()})]})})}))})]})}}]),n}(o.a.Component);function ve(){var e=s.useState("home"),t=Object(g.a)(e,2),n=t[0],a=t[1],r=s.useRef(null);s.useEffect((function(){r.current.ownerDocument.body.scrollTop=0}),[n]);return Object(m.jsxs)(w.a,{sx:{pb:7},ref:r,children:[Object(m.jsx)(x.a,{}),function(){var e="";switch(n){case"home":e=Object(m.jsx)(je,{});break;case"notifications":e=Object(m.jsx)(Oe,{});break;case"history":e=Object(m.jsx)(xe,{})}return e}(),Object(m.jsx)(A.a,{sx:{position:"fixed",bottom:0,left:0,right:0},elevation:3,children:Object(m.jsxs)(y.a,{style:{backgroundColor:"rgba(196, 196, 196, 0.74)"},showLabels:!0,value:n,onChange:function(e,t){a(t)},children:[Object(m.jsx)(k.a,{value:"home",label:"Home",icon:Object(m.jsx)(S.a,{})}),Object(m.jsx)(k.a,{value:"notifications",label:"Notifications",icon:Object(m.jsx)(T.a,{})})]})})]})}var ge=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(m.jsxs)(o.a.Fragment,{children:[Object(m.jsx)(x.a,{}),Object(m.jsx)(ve,{}),Object(m.jsx)(v.a,{fixed:!0})]})}}]),n}(o.a.Component),we=n(366),ye=n(367),ke=n(246),Ce=n(356),Se=n(369),Ne=n(355),Ie=n(316),Ae=(n(141),n(60)),Pe=n(156);Object(Pe.a)({apiKey:"AIzaSyC6G46Jang8fkPnhYUI6UVvI6G8FjcQ44A",authDomain:"esmart-e6ed0.firebaseapp.com",projectId:"esmart-e6ed0",storageBucket:"esmart-e6ed0.appspot.com",messagingSenderId:"1027784695916",appId:"1:1027784695916:web:5b16914c3325133b607849"});var Te=Object(Ae.b)(),Me=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).loginSubmit=function(e){e.preventDefault(),window.recaptchaVerifier=new Ae.a("sendCode",{size:"invisible",callback:function(e){console.log(e)}},Te);var t=e.target.firstName.value,n=e.target.lastName.value,a=e.target.password.value,c=e.target.phone.value.trim();c="+27"+(c=c.slice(1,c.length)).trim();var i=window.recaptchaVerifier;Object(Ae.c)(Te,c,i).then((function(e){r.setState({viewOtpForm:!0,donorName:t,donorLastName:n,donorPassword:a,donorPhoneNumber:c}),window.confirmationResult=e})).catch((function(e){alert(e.message)}))},r.otpSubmit=function(e){e.preventDefault();var t=r.state,n=t.donorName,a=t.donorLastName,c=t.donorPassword,i=t.donorPhoneNumber,s=e.target.otp.value;window.confirmationResult.confirm(s).then((function(e){var t={firstName:n,lastName:a,password:c,phoneNumber:i};U.a.post("/donor/register",t).then((function(e){e.data.isCreated&&r.setState({isAuthenticated:!0})}))})).catch((function(e){alert(e.message)}))},r.state={viewOtpForm:!1,donorName:"",donorLastName:"",donorPassword:"",donorPhoneNumber:"",isAuthenticated:!1},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=Object(G.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.check();case 2:this.setState({isAuthenticated:Z.getAuth()});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.viewOtpForm;return e.isAuthenticated?Object(m.jsx)(j.a,{to:"/donor/signin"}):Object(m.jsx)(we.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(m.jsxs)(we.a.Column,{style:{maxWidth:450},children:[Object(m.jsxs)(ye.a,{as:"h2",color:"teal",textAlign:"center",children:[Object(m.jsx)(ke.a,{src:p})," Register as a donor"]}),t?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Ce.a,{size:"large",onSubmit:this.otpSubmit,children:Object(m.jsxs)(Se.a,{stacked:!0,children:[Object(m.jsx)(Ce.a.Input,{fluid:!0,icon:"inbox",type:"number",onFocus:!0,label:"Enter OTP",iconPosition:"left",placeholder:"OTP code",name:"otp"}),Object(m.jsx)(Ie.a,{color:"teal",fluid:!0,size:"large",children:"Verify OTP"})]})})}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Ce.a,{size:"large",onSubmit:this.loginSubmit,children:Object(m.jsxs)(Se.a,{stacked:!0,children:[Object(m.jsx)(Ce.a.Input,{fluid:!0,icon:"user",type:"text",autoComplete:"false",iconPosition:"left",placeholder:"First name",name:"firstName"}),Object(m.jsx)(Ce.a.Input,{fluid:!0,icon:"user",type:"text",autoComplete:"false",iconPosition:"left",placeholder:"Last name",name:"lastName"}),Object(m.jsx)(Ce.a.Input,{fluid:!0,icon:"lock",type:"password",autoComplete:"false",iconPosition:"left",placeholder:"Password",name:"password"}),Object(m.jsx)(Ne.a,{label:"+27",fluid:!0,type:"text",autoComplete:"false",placeholder:"Phone",name:"phone",pattern:"[0-9]{10}",title:"example: 0622635825"}),Object(m.jsx)("div",{style:{paddingTop:"5%"}}),Object(m.jsx)(Ie.a,{id:"sendCode",color:"teal",fluid:!0,size:"large",type:"submit",children:"SignUp"})]})})})]})})}}]),n}(o.a.Component),Fe=n(361),Le=Object(Ae.b)(),De=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).loginSubmit=function(){var e=Object(G.a)(Y.a.mark((function e(t){var n,a,c,i,s,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r.setState({isLoading:!0}),n=t.target.password.value,a=t.target.phone.value,c="+27"+(c=(c=a.trim()).slice(1,c.length)).trim(),null!==(i=Le.currentUser)&&(s=i.phoneNumber,"+27"!==c?(console.log(c),c===s?(o={phone:c,password:n},U.a.post("/donor/signin",o).then(function(){var e=Object(G.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data,console.log(n),n.auth?(window.localStorage.setItem("sudo",n.token),r.setState({isLoading:!1,isAuthenticated:!0})):r.setState({isLoading:!1,isError:!0,errorMsg:"You password or phone number is incorrect"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):(console.log("phone not found in firebase"),r.setState({isLoading:!1,isError:!0,errorMsg:"There is no account linked with this phone number"}))):(r.setState({isLoading:!1,isError:!0,errorMsg:"Please enter your password and phone number"}),console.log("please enter phone")));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={isLoading:!1,isError:!1,errorMsg:"",isAuthenticated:!1},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=Object(G.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.check();case 2:this.setState({isAuthenticated:Z.getAuth()});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isAuthenticated?Object(m.jsx)(j.a,{to:"/donor/app"}):Object(m.jsx)(we.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(m.jsxs)(we.a.Column,{style:{maxWidth:450},children:[Object(m.jsxs)(ye.a,{as:"h2",color:"teal",textAlign:"center",children:[Object(m.jsx)(ke.a,{src:p})," Sign-in as a donor"]}),Object(m.jsx)(Ce.a,{size:"large",onSubmit:this.loginSubmit,children:Object(m.jsxs)(Se.a,{stacked:!0,children:[Object(m.jsx)(Ce.a.Input,{fluid:!0,icon:"lock",type:"password",autoComplete:"false",iconPosition:"left",placeholder:"Password",name:"password"}),Object(m.jsx)(Ne.a,{label:"+27",fluid:!0,type:"text",autoComplete:"false",placeholder:"Phone",name:"phone",pattern:"[0-9]{10}",title:"example: 0622635825"}),Object(m.jsx)("div",{style:{paddingTop:"5%"}}),Object(m.jsx)(Ie.a,{loading:this.state.isLoading,id:"sendCode",color:"teal",fluid:!0,size:"large",type:"submit",children:"Sign In"})]})}),this.state.isError?Object(m.jsx)(Fe.a,{attached:"bottom",negative:!0,children:this.state.errorMsg}):"",Object(m.jsxs)(Fe.a,{children:["New to us? ",Object(m.jsx)("a",{href:"/#/donor/register",children:"Sign Up"})]})]})})}}]),n}(o.a.Component),Re=Object(Ae.b)(),ze=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).loginSubmit=function(){var e=Object(G.a)(Y.a.mark((function e(t){var n,a,c,i,s,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r.setState({isLoading:!0}),n=t.target.password.value,a=t.target.phone.value,c="+27"+(c=(c=a.trim()).slice(1,c.length)).trim(),null!==(i=Re.currentUser)&&(s=i.phoneNumber,"+27"!==c?(console.log(c),c===s?(o={phone:c,password:n},U.a.post("/collector/signin",o).then(function(){var e=Object(G.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data,console.log(n),n.auth?(window.localStorage.setItem("cid",n.token),r.setState({isLoading:!1,isAuthenticated:!0})):r.setState({isLoading:!1,isError:!0,errorMsg:"You password or phone number is incorrect"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):(console.log("phone not found in firebase"),r.setState({isLoading:!1,isError:!0,errorMsg:"There is no account linked with this phone number"}))):(r.setState({isLoading:!1,isError:!0,errorMsg:"Please enter your password and phone number"}),console.log("please enter phone")));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={isLoading:!1,isError:!1,errorMsg:"",isAuthenticated:!1},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=Object(G.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.check();case 2:this.setState({isAuthenticated:se.getAuth()});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isAuthenticated?Object(m.jsx)(j.a,{to:"/collector/app"}):Object(m.jsx)(we.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(m.jsxs)(we.a.Column,{style:{maxWidth:450},children:[Object(m.jsxs)(ye.a,{as:"h2",color:"teal",textAlign:"center",children:[Object(m.jsx)(ke.a,{src:p})," Sign-in as a collector"]}),Object(m.jsx)(Ce.a,{size:"large",onSubmit:this.loginSubmit,children:Object(m.jsxs)(Se.a,{stacked:!0,children:[Object(m.jsx)(Ce.a.Input,{fluid:!0,icon:"lock",type:"password",autoComplete:"false",iconPosition:"left",placeholder:"Password",name:"password"}),Object(m.jsx)(Ne.a,{label:"+27",fluid:!0,type:"text",autoComplete:"false",placeholder:"Phone",name:"phone",pattern:"[0-9]{10}",title:"example: 0622635825"}),Object(m.jsx)("div",{style:{paddingTop:"5%"}}),Object(m.jsx)(Ie.a,{loading:this.state.isLoading,id:"sendCode",color:"teal",fluid:!0,size:"large",type:"submit",children:"Sign In"})]})}),this.state.isError?Object(m.jsx)(Fe.a,{attached:"bottom",negative:!0,children:this.state.errorMsg}):"",Object(m.jsxs)(Fe.a,{children:["New to us? ",Object(m.jsx)("a",{href:"/#/collector/register",children:"Sign Up"})]})]})})}}]),n}(o.a.Component);Object(Pe.a)({apiKey:"AIzaSyC6G46Jang8fkPnhYUI6UVvI6G8FjcQ44A",authDomain:"esmart-e6ed0.firebaseapp.com",projectId:"esmart-e6ed0",storageBucket:"esmart-e6ed0.appspot.com",messagingSenderId:"1027784695916",appId:"1:1027784695916:web:5b16914c3325133b607849"});var Ee=Object(Ae.b)(),_e=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).loginSubmit=function(e){e.preventDefault(),window.recaptchaVerifier=new Ae.a("sendCode",{size:"invisible",callback:function(e){console.log(e)}},Ee);var t=e.target.firstName.value,n=e.target.lastName.value,a=e.target.password.value,c=e.target.phone.value.trim();c="+27"+(c=c.slice(1,c.length)).trim();var i=window.recaptchaVerifier;Object(Ae.c)(Ee,c,i).then((function(e){r.setState({viewOtpForm:!0,collectorName:t,collectorLastName:n,collectorPassword:a,collectorPhoneNumber:c}),window.confirmationResult=e})).catch((function(e){alert(e.message)}))},r.otpSubmit=function(e){e.preventDefault();var t=r.state,n=t.collectorName,a=t.collectorLastName,c=t.collectorPassword,i=t.collectorPhoneNumber,s=e.target.otp.value;window.confirmationResult.confirm(s).then((function(e){var t={firstName:n,lastName:a,password:c,phoneNumber:i};U.a.post("/create/collector/account",t).then((function(e){e.data.isCreated&&r.setState({isAuthenticated:!0})}))})).catch((function(e){alert(e.message)}))},r.state={viewOtpForm:!1,collectorName:"",collectorLastName:"",collectorPassword:"",collectorPhoneNumber:"",isAuthenticated:!1},r}return Object(r.a)(n,[{key:"render",value:function(){var e=this.state,t=e.viewOtpForm;return e.isAuthenticated?Object(m.jsx)(j.a,{to:"/collector/signin"}):Object(m.jsx)(we.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(m.jsxs)(we.a.Column,{style:{maxWidth:450},children:[Object(m.jsxs)(ye.a,{as:"h2",color:"teal",textAlign:"center",children:[Object(m.jsx)(ke.a,{src:p})," Register as a collector"]}),t?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Ce.a,{size:"large",onSubmit:this.otpSubmit,children:Object(m.jsxs)(Se.a,{stacked:!0,children:[Object(m.jsx)(Ce.a.Input,{fluid:!0,icon:"inbox",type:"number",onFocus:!0,label:"Enter OTP",iconPosition:"left",placeholder:"OTP code",name:"otp"}),Object(m.jsx)(Ie.a,{color:"teal",fluid:!0,size:"large",children:"Verify OTP"})]})})}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Ce.a,{size:"large",onSubmit:this.loginSubmit,children:Object(m.jsxs)(Se.a,{stacked:!0,children:[Object(m.jsx)(Ce.a.Input,{fluid:!0,icon:"user",type:"text",autoComplete:"false",iconPosition:"left",placeholder:"First name",name:"firstName"}),Object(m.jsx)(Ce.a.Input,{fluid:!0,icon:"user",type:"text",autoComplete:"false",iconPosition:"left",placeholder:"Last name",name:"lastName"}),Object(m.jsx)(Ce.a.Input,{fluid:!0,icon:"lock",type:"password",autoComplete:"false",iconPosition:"left",placeholder:"Password",name:"password"}),Object(m.jsx)(Ne.a,{label:"+27",fluid:!0,type:"text",autoComplete:"false",placeholder:"Phone",name:"phone",pattern:"[0-9]{10}",title:"example: 0622635825"}),Object(m.jsx)("div",{style:{paddingTop:"5%"}}),Object(m.jsx)(Ie.a,{id:"sendCode",color:"teal",fluid:!0,size:"large",type:"submit",children:"SignUp"})]})})})]})})}}]),n}(o.a.Component),Ue=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)(u.a,{children:Object(m.jsxs)(j.d,{children:[Object(m.jsx)(qe,{path:"/donor/app",component:ce}),Object(m.jsx)(Ve,{path:"/collector/app",component:ge}),Object(m.jsx)(j.b,{path:"/donor/register",component:Me}),Object(m.jsx)(j.b,{path:"/donor/signin",component:De}),Object(m.jsx)(j.b,{path:"/collector/signin",component:ze}),Object(m.jsx)(j.b,{path:"/collector/register",component:_e}),Object(m.jsx)(j.b,{path:"/",component:O})]})})})}}]),n}(o.a.Component),qe=function(e){var t=e.component,n=Object(d.a)(e,["component"]);return Object(m.jsx)(j.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){return Z.getAuth()?Object(m.jsx)(t,Object(l.a)({},e)):Object(m.jsx)(j.a,{to:{pathname:"/donor/signin"}})}}))},Ve=function(e){var t=e.component,n=Object(d.a)(e,["component"]);return Object(m.jsx)(j.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){return se.getAuth()?Object(m.jsx)(t,Object(l.a)({},e)):Object(m.jsx)(j.a,{to:{pathname:"/collector/signin"}})}}))},We=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(m.jsx)(Ue,{})}}]),n}(o.a.Component),Be=n(55),He=n.n(Be);n(309);He.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(We,{})}),document.getElementById("root"))}},[[310,1,2]]]);
//# sourceMappingURL=main.f4f63f52.chunk.js.map